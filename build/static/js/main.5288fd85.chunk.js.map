{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","services/Persons.js","components/ErrorMsg.js","App.js","index.js"],"names":["Person","person","remove","name","number","id","onClick","Persons","filterWith","persons","flen","length","fval","toUpperCase","filter","v","substring","map","key","PersonForm","state","change","submit","onSubmit","value","onChange","type","Filter","text","baseUrl","axios","get","then","response","data","newObject","post","delete","put","ErrorMsg","console","log","msgclass","className","message","App","useState","setPersons","stateNewPerson","stateFilters","stateError","setstateError","onMessage","onErrorMessage","msg","error","useEffect","PersonsService","catch","event","target","preventDefault","newName","index","findIndex","loop","newPerson","finalizeSubmit","newPersons","window","confirm","dbPerson","concat","item","targetID","resp","newPers","splice","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5288fd85.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({person, remove}) => (\n    <li >Name: {person.name} Number: {person.number} <button name={person.id} onClick={remove}>remove</button></li>\n)\n\nconst Persons = ({filterWith,persons,remove}) => {\n\n    const flen = filterWith.length\n    const fval = filterWith.toUpperCase()\n\n    const name_filter = (v) => { \n        const vcut = v.name.substring(0,flen)\n        return vcut.toUpperCase() === fval\n    }\n\n    return (\n    <div>\n        <ul>\n        { persons.filter(name_filter).map( (person) => (\n            <Person key={person.name} person={person} remove={remove}/>\n            ) )\n        }\n        </ul>\n    </div>)\n}\n\nexport default Persons","import React from 'react'\n\n\n\n\n\nconst PersonForm = ({state,change,submit}) => (\n    <div>\n        \n        <form onSubmit={submit}>\n            <div> Name: <input name=\"name\" value={state.name} onChange={change}/> </div>\n            <div> Number: <input name=\"number\" value={state.number} onChange={change}/> </div> \n            <button type=\"submit\">add</button>\n        </form>\n    </div>\n)\n\nexport default PersonForm;","import React  from 'react'\n\n\nconst Filter = ({text,change}) => (\n    <div>\n        <p>Filter show with</p>\n        <form >\n            <input value={text} onChange={ change }/>\n        </form>\n    </div>\n)\n\nexport default Filter;\n","import axios from 'axios'\n\nconst baseUrl = \"/api/persons\"\n\nconst getAll = () => {\n    const req = axios.get(baseUrl)\n    return req.then(response => response.data)\n}\n\nconst create = newObject => {\n    const req = axios.post(baseUrl, newObject)\n    return req.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const req =  axios.put(`${baseUrl}/${id}`, newObject)\n    return req.then(response => response.data)\n}\n\nconst remove = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\n\nexport default { getAll, create, remove, update }\n\n","import React from 'react'\n\n\nconst ErrorMsg = ({ state }) => {\n\n    if (state.type === null)\n        return null;\n\n    console.log(\"ErrorMsg\", state)\n\n    const msgclass = state.type === \"error\"\n        ? \"msg-base msg-error\"\n        : \"msg-base msg-info\"\n\n\n    return (\n        <div className={msgclass}>\n            {state.message}\n        </div >)\n\n}\n\nexport default ErrorMsg;\n","import React, { useState, useEffect } from 'react'\n\n\nimport Persons from './components/Persons';\nimport PersonForm from './components/PersonForm';\nimport Filter from './components/Filter';\nimport PersonsService from './services/Persons'\nimport ErrorMsg from './components/ErrorMsg'\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n\n    const stateNewPerson = useState({ 'name': '', 'number': '' })\n    const stateFilters = useState('')\n    const [stateError, setstateError] = useState({ 'type': null, 'message': '' })\n\n    const onMessage = (type, message) => {\n        setstateError({ type, message })\n    }\n\n    const onErrorMessage = (msg, error) => {\n        setstateError({type:\"error\", message: msg + \": \" + error.response.data.error })\n    }\n\n    useEffect(() => {\n        console.log('effect');\n        PersonsService.getAll()\n            .then(data => {\n                console.log('got data', data)\n                setPersons(data);\n            }\n            )\n            .catch(error => {\n                onErrorMessage(\"Unable to connect\", error)\n            })\n    }, []);\n\n    console.log('render', persons.length, 'persons');\n\n\n\n\n    const onFilterChange = (event) => {\n        const value = event.target.value\n        stateFilters[1](value)\n        console.log(\"filter\", value)\n    }\n\n    const onDelete = (event) => {\n        const targetID = (event.target.name)\n        console.log(\"delete\", targetID)\n        console.log(persons)\n\n        const index = persons.findIndex((loop) => (loop.id === targetID))\n        console.log('Remove index', index)\n\n        if (index < 0)\n            return; // not good!\n\n        if (window.confirm(\"Really delete \" + persons[index].name + \"?\") === false)\n            return;\n\n        console.log('Confirmation ok')\n\n        PersonsService.remove(targetID)\n            .then(resp => {\n                const newPers = [...persons]\n                newPers.splice(index, 1);\n                console.log(newPers)\n                setPersons(newPers)\n                onMessage(\"info\", \"Information \" + persons[index].name + \" was deleted!\")\n            })\n            .catch(error => { onErrorMessage(\"Unable to delete\", error) })\n    }\n\n    const onNewPersonSubmit = (event) => {\n        event.preventDefault()\n        console.log('Submit new', stateNewPerson[0])\n        const newName = stateNewPerson[0].name.toUpperCase()\n\n        const index = persons.findIndex((loop) => (loop.name.toUpperCase() === newName))\n\n        console.log(\"found\", index)\n        const newPerson = { ...stateNewPerson[0] }\n\n        const finalizeSubmit = (newPersons, message) => {\n            stateNewPerson[1]({ 'name': '', 'number': '' })\n            setPersons(newPersons);\n            onMessage(\"info\", message)\n\n        }\n\n        if (index >= 0) {\n\n            if (window.confirm(\"Person \" + newName + \" exists! Replace with new?\") === false) {\n                console.log('bail out!')\n                return\n            }\n\n            PersonsService.update(persons[index].id, newPerson)\n                .then(dbPerson => {\n                    let newPersons = [...persons]\n                    newPersons[index] = dbPerson\n                    finalizeSubmit(newPersons, \"Modified \" + dbPerson.name);\n                })\n                .catch(error => { onErrorMessage(\"Unable to update\", error) })\n\n            return;\n        }\n        else {\n            // Did not exists, create new.\n            PersonsService.create(newPerson)\n                .then(dbPerson => {\n                    finalizeSubmit(persons.concat(dbPerson), \"Added \" + dbPerson.name)\n\n                })\n                .catch(error => { onErrorMessage(\"Unable to create\", error) })\n        }\n    }\n\n    const onNewPersonChange = (event) => {\n        const item = event.target.name\n        const value = event.target.value\n\n\n        const newPerson = { ...stateNewPerson[0], [item]: value };\n        console.log(\"new person\", newPerson)\n        stateNewPerson[1](newPerson)\n    }\n\n    return (\n        <div>\n            <ErrorMsg state={stateError} />\n\n            <h2>Phonebook</h2>\n\n            <Filter text={stateFilters[0]} change={onFilterChange} />\n\n            <h3>Add a new</h3>\n\n            <PersonForm state={stateNewPerson[0]} submit={onNewPersonSubmit} change={onNewPersonChange} />\n\n            <h3>Numbers</h3>\n\n            <Persons filterWith={stateFilters[0]} persons={persons} remove={onDelete} />\n        </div>\n    )\n\n\n}\n\nexport default App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css'\n\n\nReactDOM.render(<App  />, document.getElementById('root'))"],"sourceRoot":""}